# Домашнее задание: «Комплексное исследование производительности чёрного ящика»

Суть этого домашнего задания в том, чтобы поисследовать приложение, исходный код которого вам недоступен. Основано этого задание на изученных темах производительности Linux: CPU, память, диск, сеть, ядро и тд.

Каждый следующий уровень задания включает в себя задачи предыдущего уровня.

---

## Требования к окружению

Рекомендуется использовать любую современную дистрибутив Linux (Ubuntu, Debian и тд.). Все уровни задания полностью выполняются в Linux. Но:
 
- Если у вас macOS, то для выполнения задания необходима полноценная виртуальная машина Linux, потому что macOS не содержит нужным подсистем. Можно рассмотреть использование либо UTM, либо Multipass, либо что-то на ваш выбор
- Если у вас Windows, то поставьте WSL2

## Уровень 1 - базовый системный анализ (задание не уд(4)) 

Цель: понять поведение приложения как процесса Linux и выявить базовые проблемы CPU и общей нагрузки. Нужно поисследовать:

1. Утилизацию CPU:
- распределение нагрузки по ядрам
- рост system time
- признаки блокировок
- длину очереди выполнения

2. Активность потоков:
- количество активных потоков
- признаки ожиданий или частых переключений контекста

3. Общие системные метрики:
- состояние памяти в рамках общей картины
- общее состояние ввода-вывода
- наличие скачков нагрузки

Cформируйте отчет, в котором описывает:
- наблюдаемое поведение CPU
- найденные аномалии
- предварительные гипотезы о причинах деградации

---

## Уровень 2 — анализ памяти и диска (задание на хор(7))

Цель: дополнить исследование CPU анализом подсистем памяти и диска. Нужно выполнить все задачи уровня 1 и добавить в отчет:

1. Исследование памяти:
- динамика RSS
- утечки памяти
- распределение областей памяти
- minor и major page faults
- поведение page cache

2. Исследование дисковой подсистемы:
- интенсивность операций ввода-вывода
- мелкие синхронные записи
- поведение кэша файловой системы
- задержки при записи или чтении
- блокировки на файловых операциях

3. Корреляция с CPU:
- влияет ли дисковая нагрузка на system time
- вызывает ли I/O блокировки потоков
- прослеживается ли связь между давлением на память и общей производительностью

---

## Уровень 3 — анализ сетевого стека и ядра (задание на отл(9))

Цель: расширить анализ уровня 1 и уровня 2 исследованием сетевого поведения, TCP, NIC и механизмов ядра. Нужно добавить в отчет результаты исследования:

1. TCP-подсистемы:
- состояние соединений
- заполнение очередей Recv-Q и Send-Q
- переполнение listen backlog и SYN backlog
- задержки на этапе установления соединений
- retransmits
- RTT

2. NIC и низкоуровневый ввод-вывод пакетов:
- статистика приёма и потерь пакетов
- поведение RX/TX очередей
- влияние offloading
- рост ошибок на интерфейсе

3. IRQ и softirq:
- распределение прерываний по ядрам
- рост NET_RX и NET_TX
- загрузка ksoftirqd
- признаки softirq starvation

5. Взаимосвязь сетевых и системных проблем:
- влияние page faults на качество сетевых ответов
- связь сетевых задержек с дисковой нагрузкой

---

## Формат сдачи

Отчёт должен быть представлен в виде:
- PDF или Markdown файла
- содержать выдержки из инструментов диагностики (только релевантные части)
- содержать структурированный анализ
- включать выводы

---

## Рекомендации по использованию исследуемого приложения

1. Поддерживайте достаточно долгое время нагрузки, чтобы проявились реальные проблемы
2. Проводите замеры многократно — симптомы приложения нестабильны и могут проявляться по-разному.
